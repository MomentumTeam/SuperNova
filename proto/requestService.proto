syntax = "proto3";

package RequestService;

service RequestService {
    rpc CreateRoleRequest(CreateRoleReq) returns (CreateRoleRes) {}    // בקשה ליצירת תפקיד
    rpc CreateOGRequest(CreateOGReq) returns (CreateOGRes) {}    //בקשה ליצירת היררכיה
    rpc CreateEntityRequest(CreateEntityReq) returns (CreateEntityRes){}   //בקשה ליצירת ישות
    rpc CreateNewApproverRequest(CreateNewApproverReq) returns (CreateNewApproverRes) {}   //בקשה להוספת גורם מאשר
    rpc RenameOGRequest(RenameOGReq) returns (RenameOGRes) {}      //בקשה לעריכת היררכיה
    rpc RenameRoleRequest(RenameRoleReq) returns (EditEntityRes) {}   //בקשה לעריכת תפקיד
    rpc EditEntityRequest(EditEntityReq) returns (EditEntityRes){}  //בקשה לעריכת ישות
    rpc DeleteOGRequest(DeleteOGReq) returns (DeleteOGRes){}  //בקשה למחיקת להיררכיה
    rpc DeleteRoleRequest(DeleteRoleReq) returns (DeleteRoleRes){}  //בקשה למחיקת תפקיד
    rpc DeleteEntityRequest(DeleteEntityReq) returns (DeleteEntityRes){}  //בקשה למחיקת ישות
    rpc AssignRoleToEntityRequest(AssignRoleToEntityReq) returns (AssignRoleToEntityRes) {}   //בקשה לקישור ישות לתפקיד (הוספת משתמש/מעבר תפקיד)   
    rpc DisconectRoleFromEntityRequest(DisconectRoleFromEntityReq) returns (DisconectRoleFromEntityRes){}  //בקשה לניתוק תפקיד ממשתמש

    rpc UpdateRequest(UpdateReq) returns (Request){}
    rpc UpdateKartoffelStatus(UpdateKartoffelStatusReq) returns (Request){}
    rpc UpdateADStatus(UpdateADStatusReq) returns (Request){}
    rpc DeleteRequest(DeleteReq) returns (SuccessMessage){}

    rpc GetRequestsByPerson(GetRequestsByPersonReq) returns (RequestArray){}
    rpc GetRequestBySerialNumber(GetRequestBySerialNumberReq) returns (Request){}
    rpc GetAllRequests(GetAllRequestsReq) returns (RequestArray){}
    rpc GetRequestById(GetRequestByIdReq) returns (Request) {}
    rpc UpdateApproverDecision(UpdateApproverDecisionReq) returns (Request) {}
    rpc IsRequestApproved(IsRequestApprovedReq) returns (IsRequestApprovedRes){}

    
    rpc CanPushToKartoffelQueue(CanPushToQueueReq) returns (CanPushToQueueRes){}
    rpc CanPushToADQueue(CanPushToQueueReq) returns (CanPushToQueueRes){}
    rpc IncrementKartoffelRetries(IncrementRetriesReq) returns (Request){}
    rpc IncrementADRetries(IncrementRetriesReq) returns (Request){}

    rpc SearchRequestsBySubmitterDisplayName(SearchRequestsByDisplayNameReq) returns (RequestArray) {}
    rpc SearchRequestsByCommanderDisplayName(SearchRequestsByDisplayNameReq) returns (RequestArray) {}
    rpc SearchRequestsBySecurityDisplayName(SearchRequestsByDisplayNameReq) returns (RequestArray) {}
    rpc SearchRequestsByApproverDisplayName(SearchRequestsByDisplayNameReq) returns (RequestArray) {}



    rpc GetRequestsInProgressByDue(GetRequestsInProgressByDueReq) returns (RequestArray){}
    rpc GetRequestIdsInProgressByDue(GetRequestsInProgressByDueReq) returns (RequestIdArray){}
    rpc UpdateCommanders(UpdateApproversReq) returns (Request){}
    rpc UpdateSecurityApprovers(UpdateApproversReq) returns (Request){}
}

// ---------------------------------------------LEGO Requests------------------------------------------------------------

//1.CreateRole
message CreateRoleReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    CreateRoleKartoffelParams kartoffelParams = 11;
    CreateRoleADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message CreateRoleRes{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    CreateRoleKartoffelParams kartoffelParams = 11;
    CreateRoleADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//2.CreateOG
message CreateOGReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    CreateOGKartoffelParams kartoffelParams = 11;
    CreateOGADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message CreateOGRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    CreateOGKartoffelParams kartoffelParams = 11;
    CreateOGADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}


//3.CreateEntity
message CreateEntityReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    CreateEntityKartoffelParams kartoffelParams = 11;
    CreateEntityADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message CreateEntityRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    CreateEntityKartoffelParams kartoffelParams = 11;
    CreateEntityADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//4.CreateNewApproverRequest
message CreateNewApproverReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional AdditionalParams additionalParams = 9;
    optional string comments = 10;
    optional string approversComments = 11;
    optional int64 due = 12;
}

message CreateNewApproverRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    AdditionalParams additionalParams = 9;
    string comments = 10;
    string approversComments = 11;
    int64 due = 12;

    string id = 13;
    int64 createdAt = 14;
    int64 updatedAt = 15;
    RequestType type = 16; 
    string serialNumber = 17;
    bool needSecurityDecision = 18;
    bool needSuperSecurityDecision = 19;
}

//5.RenameOGRequest
message RenameOGReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    RenameOGKartoffelParams kartoffelParams = 11;
    RenameOGADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message RenameOGRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    RenameOGKartoffelParams kartoffelParams = 11;
    RenameOGADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//6.RenameRoleRequest
message RenameRoleReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    RenameRoleKartoffelParams kartoffelParams = 11;
    RenameRoleADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message RenameRoleRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    RenameRoleKartoffelParams kartoffelParams = 11;
    RenameRoleADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//7.EditEntityRequest
message EditEntityReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    EditEntityKartoffelParams kartoffelParams = 11;
    EditEntityADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message EditEntityRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    EditEntityKartoffelParams kartoffelParams = 11;
    EditEntityADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//8.DeleteOGRequest
message DeleteOGReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    DeleteOGKartoffelParams kartoffelParams = 11;
    DeleteOGADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message DeleteOGRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    DeleteOGKartoffelParams kartoffelParams = 11;
    DeleteOGADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//9.DeleteRoleRequest
message DeleteRoleReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    DeleteRoleKartoffelParams kartoffelParams = 11;
    DeleteRoleADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message DeleteRoleRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    DeleteRoleKartoffelParams kartoffelParams = 11;
    DeleteRoleADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//10.DeleteEntityRequest
message DeleteEntityReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    DeleteEntityKartoffelParams kartoffelParams = 11;
    DeleteEntityADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message DeleteEntityRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    DeleteEntityKartoffelParams kartoffelParams = 11;
    DeleteEntityADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//11.AssignRoleToEntityRequest
message AssignRoleToEntityReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    AssignRoleToEntityKartoffelParams kartoffelParams = 11;
    AssignRoleToEntityADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message AssignRoleToEntityRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    AssignRoleToEntityKartoffelParams kartoffelParams = 11;
    AssignRoleToEntityADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

//12.DisconectRoleFromEntityRequest
message DisconectRoleFromEntityReq{
    EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    optional KartoffelStatus kartoffelStatus = 9;
    optional ADStatus adStatus = 10;
    DisconectRoleFromEntityKartoffelParams kartoffelParams = 11;
    DisconectRoleFromEntityADParams adParams = 12;
    optional string comments = 13;
    optional string approversComments = 14;
    optional int64 due = 15;
}

message DisconectRoleFromEntityRes{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    DisconectRoleFromEntityKartoffelParams kartoffelParams = 11;
    DisconectRoleFromEntityADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18;
    RequestType type = 19; 
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}

// -------------------------------------------------------Params-------------------------------------------------------------------------

//1.CreateRoleRequest
message CreateRoleKartoffelParams{
    //for role
    string jobTitle = 1; //name of the role
    string directGroup = 2; //groupId of direct father
    optional string roleId = 3; //T154514... generated automatically by tea-service if not given
    string clearance = 4; //clearance of the role
    optional string akaUnit = 5;

    //forDigitalIdentity
    string type = 6; //always domainUser
    string source = 7; //always oneTree
    optional string uniqueId = 8; //T154514... generated automatically by tea-service if not given
    optional string mail = 9; //T154514... generated automatically by tea-service if not given
    bool isRoleAttachable = 10; //true, if the role is unoccupied
}

message CreateRoleADParams{
    string samAccountName = 1; //T154514... generated automatically by tea-service if not given
    string ouDisplayName = 2; // Role's full hierarchy
    string jobTitle = 3; //name of the role
}

//2.CreateOGRequest
message CreateOGKartoffelParams{
    string name = 1;
    string parent = 2;
    string source = 3;
}

message CreateOGADParams{
    string ouDisplayName = 1;
    string ouName = 2;
    string name = 3;
}

//3.CreateEntityRequest
message CreateEntityKartoffelParams{
    string firstName = 1;
    string lastName = 2;
    string identityCard = 3;
    string personalNumber = 4;
    string serviceType = 5;
    repeated string phone = 6;
    repeated string mobilePhone = 7;
    string address = 8;
    string clearance = 9;
    string sex = 10;
    int64 birthdate = 11;
    string entityType = 12;
}

message CreateEntityADParams{
//NO PARAMETERS NEEDED
}

//4.CreateNewApproverRequest
message AdditionalParams{
    string entityId = 1;
    string displayName = 2;
    repeated string domainUsers = 3;
    string akaUnit = 4;
    ApproverType type = 5;
}

//5.RenameOGRequest
message RenameOGKartoffelParams{
    string id = 1;
    string name = 2;
}

message RenameOGADParams{
    string ouDisplayName = 1;
    string oldOuName = 2;
    string newOuName = 3;
}


//6.RenameRoleRequest
message RenameRoleKartoffelParams{
    string jobTitle = 1;
    string roleId = 2;
}

message RenameRoleADParams{
    string samAccountName = 1;
    string jobTitle = 2;
}

//7.EditEntityRequest
message EditEntityKartoffelParams{
    string id = 1;
    string firstName = 2;
    string lastName = 3;
    optional string identityCard = 4;
    string personalNumber = 5;
    string serviceType = 6;
    repeated string phone = 7;
    repeated string mobilePhone = 8;
    string address = 9;
    string clearance = 10;
    string sex = 11;
    int64 birthdate = 12;
    string entityType = 13;
}

message EditEntityADParams{
    string samAccountName = 1;
    string firstName = 2;
    string lastName = 3;
    string fullName = 4;
}

//8.DeleteOGRequest
message DeleteOGKartoffelParams{
    string id = 1;
}

message DeleteOGADParams{
    string ouDisplayName = 1;
    string ouName = 2;
    string name = 3;
}

//9.DeleteRoleRequest
message DeleteRoleKartoffelParams{
    string roleId = 1;
    string uniqueId = 2;
}

message DeleteRoleADParams{
    string samAccountName = 1;
}

//10.DeleteEntityRequest
message DeleteEntityKartoffelParams{
    string id = 1;
}

message DeleteEntityADParams{
    //NO PARAMETERS NEEDED
}

//11.AssignRoleToEntityRequest
message AssignRoleToEntityKartoffelParams{
    string id = 1;
    string uniqueId = 2;
}

message AssignRoleToEntityADParams{
    string oldSAMAccountName = 1;
    string newSAMAccountName = 2;
    string upn = 3;
    string firstName = 4;
    string lastName = 5;
    string fullName = 6;
    string rank = 7;
    string roleSerialCode = 8;
}

//12.DisconnectRoleFromEntityRequest
message DisconectRoleFromEntityKartoffelParams{
    string id = 1;
    string uniqueId = 2;
}

message DisconectRoleFromEntityADParams{
    string samAccountName = 1;
}

// ---------------------------------------------Other Functions Objects------------------------------------------------------------

//UpdateRequest

message UpdateReq{
    string id = 1;
    UpdateReqProperties requestProperties = 2;
}
message UpdateReqProperties{
    optional EntityMin submittedBy = 1;
    optional RequestStatus status = 2;
    optional ApproverDecision commanderDecision = 3;
    optional ApproverDecision securityDecision = 4;
    optional ApproverDecision superSecurityDecision = 5;
    optional KartoffelStatus kartoffelStatus = 6;
    optional ADStatus adStatus = 7;
    optional KartoffelParams kartoffelParams = 8;
    optional ADParams adParams = 9;
    optional int64 due = 10;
    repeated EntityMin commanders = 11; 
    repeated EntityMin securityApprovers = 12;  
}

//UpdateKartoffelStatus
message UpdateKartoffelStatusReq{
    string requestId = 1;
    StageStatus status = 2;
    optional string message = 3;
    optional string createdId = 4;
}

//UpdateADStatus
message UpdateADStatusReq{
    string requestId = 1;
    StageStatus status = 2;
    string message = 3;
}

//DeleteRequest
message DeleteReq{
    string id = 1;
}

//GetRequestsByPerson
message GetRequestsByPersonReq{
    string id = 1;
    PersonTypeInRequest personType = 2;
    PersonInfoType personInfoType = 3;
    int32 from = 4;
    int32 to = 5;
}

//GetRequestBySerialNumber
message GetRequestBySerialNumberReq{
    string serialNumber = 1;
}

//GetAllRequests
message GetAllRequestsReq{
    int32 from = 1;
    int32 to = 2;
}

//GetRequestById
message GetRequestByIdReq{
    string id = 1;
}


// SearchRequestsBySubmitterDisplayName,SearchRequestsByCommanderDisplayName,
// SearchRequestsBySecurityDisplayNamer,SearchRequestsByApproverDisplayName
message SearchRequestsByDisplayNameReq{
    string displayName = 1;
    int32 from = 2;
    int32 to = 3;
}


//CanPushToKartoffelQueue, CanPushToADQueue
message CanPushToQueueReq{
    string id = 1;
}

message CanPushToQueueRes{
    bool canPushToQueue = 1;
}

//IncrementKartoffelRetries, IncrementADRetries
message IncrementRetriesReq{
    string id = 1;
}

// UpdateCommanderDecision, UpdateSecurityDecision, UpdateSuperSecurityDecision
message UpdateApproverDecisionReq{
    string id = 1;
    ApproverDecision approverDecision = 2;
    PersonTypeInRequest approverType = 3;
}

//GetRequestsInProgressByDue, GetRequestIdsInProgressByDue
message GetRequestsInProgressByDueReq{
    int64 due = 1;
}

//UpdateCommanders, UpdateSecurityApprovers 
message UpdateApproversReq{
    string id = 1;
    repeated EntityMin approvers = 2;
}

//IsRequestApproved
message IsRequestApprovedReq{
    string id = 1;
}

message IsRequestApprovedRes{
    bool isRequestApproved = 1;
}

// ---------------------------------------------Other Objects------------------------------------------------------------
message RequestIdArray{
    repeated string requestIds = 1;
    int32 count = 2;
}

message EntityMin{
    string id = 1;
    string displayName = 2;
    string identityCard = 3;
    string personalNumber = 4;
}

message SuccessMessage{
    bool success = 1;
    string message = 2;
}

message ApproverDecision{
    EntityMin approver = 1;
    Decision decision = 2;
    optional string reason = 3;
    optional int64 date = 4;
}

message KartoffelStatus{
    StageStatus status = 1;
    string message = 2;
    optional string createdId = 3;
    int32 failedRetries = 4;
}

message ADStatus{
    StageStatus status = 1;
    string message = 2;
    int32 failedRetries = 3;
}

message RequestArray{
    repeated Request requests = 1;
    int32 totalCount = 2;
}



// ---------------------------------------------Generalized Objects------------------------------------------------------------

message KartoffelParams{
    //CreateOG
    optional string name = 1;
    optional string parent = 2;
    optional string source = 3; //for almost all requests

    //CreateRole

    //for role
    optional string jobTitle = 4;
    optional string directGroup = 5;
    optional string roleId = 6;
    optional string akaUnit = 7;

    //forDigitalIdentity
    optional string type = 8;
    // string source = 2;
    optional string uniqueId = 9;
    optional string mail = 10;
    optional bool isRoleAttachable = 11;

    //AssignRoleToEntity, same as changing role to entity
    optional string id = 12;
    // string uniqueId = 8;
    //CreateEntity
    optional string firstName = 13;
    optional string lastName = 14;
    optional string identityCard = 15;
    optional string personalNumber = 16;
    optional string serviceType = 17;
    repeated string phone = 18;
    repeated string mobilePhone = 19;
    optional string address = 20;
    optional string clearance = 21; //for createRole too
    optional string sex = 22;
    optional int64 birthdate = 23;
    optional string entityType = 24;

    //RenameOG
    // ?

    //RenameRole
    // ?

    //EditEntity
    // string firstName = 25;
    // string lastName = 26;
    // string identityCard = 27;
    // string personalNumber = 28;
    // string serviceType = 29;
    // repeated string phone = 30;
    // repeated string mobilePhone = 31;
    // string address = 32;
    // string clearance = 33;
    // string sex = 34;
    // int64 birthdate = 35;
    // string entityType = 36;
    // string id = 

    //DeleteOG
    // string id = ;

    //DeleteRole
    // string roleId = ;
    // string uniqueId = ;

    //DisconectRoleFromEntity
    // string uniqueId = 8;
    // string id = 9;
}

message ADParams{
    //CreateOG
    optional string ouDisplayName = 1;
    optional string ouName = 2;
    optional string name = 3;

    //CreateRole
    optional string samAccountName = 4;
    // string ouDisplayName = ;
    optional string jobTitle = 5;

    //AssignRoleToEntity
    optional string oldSAMAccountName = 6;
    optional string newSAMAccountName = 7;
    optional string upn = 8;
    optional string firstName = 9;
    optional string lastName = 10;
    optional string fullName = 11;
    optional string rank = 12;
    optional string roleSerialCode = 13;
    //CreateEntity - nothing

    //RenameOG
    //string ouDisplayName = ;
    optional string oldName = 14;
    optional string newName = 15;

    //RenameRole
    // string samAccountName = ;
    optional string newJobTitle = 16;

    //DeleteOG - ?

    //EditEntity
    // string samAccountName = ;
    // string firstName = ;
    // string lastName = ;
    // string fullName = ;

    //DisconectRoleFromEntity
    // string samAccountName = 4;
}

message RequestReq{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7; 
    repeated EntityMin superSecurityApprovers = 8;
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    KartoffelParams kartoffelParams = 11;
    ADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    optional int64 due = 15;
}

message Request{
    EntityMin submittedBy = 1;
    RequestStatus status = 2;
    ApproverDecision commanderDecision = 3;
    ApproverDecision securityDecision = 4;
    ApproverDecision superSecurityDecision = 5;
    repeated EntityMin commanders = 6;  
    repeated EntityMin securityApprovers = 7;
    repeated EntityMin superSecurityApprovers = 8; 
    KartoffelStatus kartoffelStatus = 9;
    ADStatus adStatus = 10;
    KartoffelParams kartoffelParams = 11;
    ADParams adParams = 12;
    string comments = 13;
    string approversComments = 14;
    int64 due = 15;

    string id = 16;
    int64 createdAt = 17;
    int64 updatedAt = 18; 
    RequestType type = 19;
    string serialNumber = 20;
    bool needSecurityDecision = 21;
    bool needSuperSecurityDecision = 22;
}


// ---------------------------------------------Enums------------------------------------------------------------

enum ApproverType{
    COMMANDER = 0;
    SECURITY = 1;
    SUPER_SECURITY = 2;
}

enum RequestType {
    CREATE_OG = 0;
    CREATE_ROLE = 1;
    ASSIGN_ROLE_TO_ENTITY = 2;
    CREATE_ENTITY = 3;
    RENAME_OG = 4;
    RENAME_ROLE = 5;
    EDIT_ENTITY = 6;
    DELETE_OG = 7;
    DELETE_ROLE = 8;
    DELETE_ENTITY = 9;
    DISCONNECT_ROLE = 10;
    ADD_APPROVER = 11;
}

enum RequestStatus{
    SUBMITTED = 0;
    DECLINED = 1;
    APPROVED_BY_COMMANDER = 2;
    APPROVED_BY_SECURITY = 3;
    IN_PROGRESS = 4;
    DONE = 5;
    FAILED = 6;
}

enum StageStatus{
    STAGE_UNKNOWN = 0;
    STAGE_IN_PROGRESS = 1;
    STAGE_DONE = 2;
    STAGE_FAILED = 3;
}

enum Decision{
    DECISION_UNKNOWN = 0;
    APPROVED = 1;
    DENIED = 2;
}

enum PersonTypeInRequest{
    SUBMITTER = 0;
    COMMANDER_APPROVER = 1;
    SECURITY_APPROVER = 2;
    SUPER_SECURITY_APPROVER = 3;
    APPROVER = 4;
}


enum PersonInfoType{
    ID = 0;
    IDENTIFIER = 1;
}